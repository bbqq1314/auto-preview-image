!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports["auto-preview-image"]=e():t["auto-preview-image"]=e()}("undefined"!=typeof self?self:this,function(){return function(t){function e(n){if(i[n])return i[n].exports;var a=i[n]={i:n,l:!1,exports:{}};return t[n].call(a.exports,a,a.exports,e),a.l=!0,a.exports}var i={};return e.m=t,e.c=i,e.d=function(t,i,n){e.o(t,i)||Object.defineProperty(t,i,{configurable:!1,enumerable:!0,get:n})},e.n=function(t){var i=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(i,"a",i),i},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="/",e(e.s=1)}([function(t,e,i){"use strict";e.a={props:{thumb:String,full:String,radius:Number,showClose:{type:Boolean,required:!1,default:!0},maxWidth:{type:Number,required:!1,default:0},maxHeight:{type:Number,required:!1,default:0}},data:function(){return{loaded:!1,appearedDialog:!1,fullWidth:0,fullHeight:0}},created:function(){this.fullWidth=window.screen.width,this.fullHeight=window.screen.height},mounted:function(){},methods:{getImgNaturalDimensions:function(t,e){var i,n;if(t.naturalWidth){var a=new Image;a.onload=function(){var t=a.width,i=a.height;e({w:t,h:i})},a.src=t.src}else i=t.naturalWidth,n=t.naturalHeight,e({w:i,h:n})},showDialog:function(){var t=this,e=this.$refs.thumb;this.getImgNaturalDimensions(e,function(e){e.w>e.h?t.fullHeight=e.h/e.w*t.fullWidth:t.fullWidth=e.w/e.h*t.fullHeight,t.maxWidth&&t.maxWidth>0&&t.fullWidth>t.maxWidth&&(t.fullWidth=t.maxWidth,t.fullHeight=e.h/e.w*t.fullWidth),t.maxHeight&&t.maxHeight>0&&t.fullHeight>t.maxHeight&&(t.fullHeight=t.maxHeight,t.fullWidth=e.w/e.h*t.fullHeight)}),this.appearedDialog=!0},hideDialog:function(){this.appearedDialog=!1},enter:function(){this.animateImage(this.$refs.thumb,this.$refs.full)},leave:function(){this.animateImage(this.$refs.full,this.$refs.thumb)},onLoadFull:function(){this.loaded=!0},animateImage:function(t,e){var i=this,n=this.getBoundForDialog(t);this.setStart(n),this.$nextTick(function(){var t=i.getBoundForDialog(e);i.setDestination(n,{top:t.top,left:t.left,width:t.width||i.fullWidth,height:t.height||i.fullHeight})})},getBoundForDialog:function(t){var e=t.getBoundingClientRect(),i=this.$refs.dialog;return{top:e.top+i.scrollTop,left:e.left+i.scrollLeft,width:e.width,height:e.height}},setStart:function(t){var e=this.$refs.animate;e.style.left=t.left+"px",e.style.top=t.top+"px",e.style.width=t.width+"px",e.style.height=t.height+"px",e.style.transitionDuration="0s",e.style.transform=""},setDestination:function(t,e){var i=this.$refs.animate;i.style.transitionDuration="";var n="translate("+(e.left-t.left)+"px, "+(e.top-t.top)+"px)",a="scale("+e.width/t.width+", "+e.height/t.height+")";i.style.transform=n+" "+a}}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i(2);i.d(e,"ApImage",function(){return n.a})},function(t,e,i){"use strict";var n=i(3),a={install:function(t){t.component("ap-image",n.a)}};e.a=a},function(t,e,i){"use strict";function n(t){i(4)}var a=i(0),o=i(6),r=i(5),l=n,s=r(a.a,o.a,!1,l,"data-v-23e1b56e",null);e.a=s.exports},function(t,e){},function(t,e){t.exports=function(t,e,i,n,a,o){var r,l=t=t||{},s=typeof t.default;"object"!==s&&"function"!==s||(r=t,l=t.default);var u="function"==typeof l?l.options:l;e&&(u.render=e.render,u.staticRenderFns=e.staticRenderFns,u._compiled=!0),i&&(u.functional=!0),a&&(u._scopeId=a);var f;if(o?(f=function(t){t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,t||"undefined"==typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),n&&n.call(this,t),t&&t._registeredComponents&&t._registeredComponents.add(o)},u._ssrRegister=f):n&&(f=n),f){var d=u.functional,h=d?u.render:u.beforeCreate;d?(u._injectStyles=f,u.render=function(t,e){return f.call(e),h(t,e)}):u.beforeCreate=h?[].concat(h,f):[f]}return{esModule:r,exports:l,options:u}}},function(t,e,i){"use strict";var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"image-dialog"},[i("button",{staticClass:"image-dialog-trigger",attrs:{type:"button"},on:{click:t.showDialog}},[i("img",{ref:"thumb",staticClass:"image-dialog-thumb",style:{borderRadius:t.radius+"px"},attrs:{src:t.thumb}})]),t._v(" "),i("transition",{attrs:{name:"dialog"},on:{enter:t.enter,leave:t.leave}},[i("div",{directives:[{name:"show",rawName:"v-show",value:t.appearedDialog,expression:"appearedDialog"}],ref:"dialog",staticClass:"image-dialog-background",on:{click:t.hideDialog}},[t.showClose?i("button",{staticClass:"image-dialog-close",attrs:{type:"button","aria-label":"Close"},on:{click:t.hideDialog}}):t._e(),t._v(" "),i("img",{ref:"animate",staticClass:"image-dialog-animate",class:{loading:!t.loaded},attrs:{src:t.loaded?t.full:t.thumb},on:{click:function(t){t.stopPropagation()}}}),t._v(" "),i("img",{ref:"full",staticClass:"image-dialog-full",attrs:{src:t.appearedDialog&&t.full,width:t.fullWidth,height:t.fullHeight},on:{click:function(t){t.stopPropagation()},load:t.onLoadFull}})])])],1)},a=[],o={render:n,staticRenderFns:a};e.a=o}])});